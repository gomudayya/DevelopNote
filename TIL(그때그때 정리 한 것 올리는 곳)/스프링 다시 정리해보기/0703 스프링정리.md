# 0703 스프링 정리

## DI

- 의존성 주입 (Dependancy Injection)

- 의존성은 구체적인 타입이 아닌 추상타입에 의존하는 것이 좋다.

    - 하위타입이 아닌 상위타입에 의존해야 한다.

    - 이유 : 변경 유연, 기존코드를 수정없이 확장가능, 유지보수하기 좋음.

- 클래스 내부에서 의존성 이어주는 것이 아니라, 런타임시간에 외부에서 의존성을 넣어주는 것이 좋다.

    - 그래야 강한 결합을 풀어줄 수 있다.

    - 테스트시 모의 객체로 쉽게 대체 가능


## IoC

- 제어의 역전 (Inversion of Control)

- 외부에서 의존성을 관리하는 모듈이 별도로 존재.

- 강한결합에서 느슨한결합으로 만들어준다.

## Bean과 IoC 컨테이너

- Bean

    - 스프링에서 관리하는 객체

    - 스프링 IoC 컨테이너에 의해 생성되고, 의존성이 주입되며, 컨테이너가 관리합니다.

    - 싱글톤

- IoC 컨테이너

    - 빈의 생성, 초기화, 소멸 등의 생명주기 관리

    - DI를 통해 결합도를 낮춰줌


## JPA

- SQL 의존적인 개발에서 벗어나기

    - ORM 없이는 SQL 수정에 따르는 시간 소모가 엄청남.

- ORM (Object-Relational-Mapping)

    - 객체와 DB의 관계를 이어줌. 

    - 객체와 데이터베이스 간의 간극을 줄여으로써 SQL 중심 개발 탈피

- JPA 

    - 자바진영 ORM 표준명세

    - Hibernate : JPA의 대표적인 구현체. 사실상 표준 (de facto, 디팩토)


## 트랜잭션

- 데이터 무결성과 정합성을 위해, 같이 묶어서 실행되어야 하는 SQL을 모아놓은 것

- SQL중 하나라도 실패하면 모든 SQL이 롤백됨. -> (Atomic) 모두 성공하거나, 모두 실패하거나

### ACID

- A (Atomic) : SQL이 모두 실행되거나, 모두 실행이 안되거나 (rollback) 

- C (Consistency) : 일관적으로 DB의 제약조건을 지켜야함

- I (Isolation) : 트랜잭션은 서로에게 영향을 끼치면 안된다.

- D (Durability) : 트랜잭션이 commit되면 DB에 영구적으로 반영된다. (비휘발성 메모리에 저장한다.)

## 영속성 컨텍스트

- 엔티티 객체를 관리하는 공간

- 트랜잭션 COMMIT 시점에, SQL쓰기 지연 저장소에 모아 놓은 SQL을 한번에 실행함 (FLUSH)

